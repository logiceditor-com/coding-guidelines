# Tagging

Прототип на английском: [tagging guide][tagging]. Здесь и далее следует
его вольное изложение и адаптация на русском.

  [tagging]: https://github.com/martin-eden/tagging_guideline/blob/master/tagging_guide.MD

В описании изменений рекомендуется использовать метки (tags, тэги).
Это просто некий текст в квадратных скобках `[]`. Смысл в том, чтобы можно
было найти все отностящиеся к этой метке изменения простым grep.

    [.^][readme] Reworded some lines.
    [?+][string-concatter] Added experimental garbage-collection heuristic.
    [!*] Debugged! (At least hope so.) Just want to mark this state...
    [/] [string/from_file] renamed to [file/as_string].

## Дайджест изменений

В начале сообщения может быть тэг дайджеста изменений со спецсимволами.
Каждый спецсимвол - опциональный флаг. То есть может быть упомянут не
более чем единожды. Значение их следующее:

* Важность:
    * `.` -- мелочь. Изменеие не оказывает практически никакого влияния,
      кроме эстетического
    * `!` -- важно. Важное изменение, которое ломает/правит целые
      подсистемы функционала

* Направление:
    * `?` -- эксперимент. Изменение содержит идею, требующую дальнейшей
      проверки.
    * `^` -- улучшение. Это когда с внешней точки зрения ничего не поменялось,
      но внутри код стал быстрее/красивее.
    * `*` -- исправление ошибки. Это когда с внешней точки зрения код
      вдруг стал работать так, как и предполагается. То есть исправление,
      не изменяющее интерфейс ввода/вывода.

* Изменения кода:
    * `+` -- добавление. Что-то добавлено. Новая функция, новый файл,
      новая подсистема...
    * `-` -- что-то удалено насовсем. Обычно что-нибудь ненужное.
    * `/` -- что-то переименовано или перемещено. Например, изменено
      имя экспортируемой функции. Или в коде используется функция с
      другим именем. Или файл переименован-перемещён.

      То есть, исправление, возможно изменяющее интерфейс ввода-вывода,
      но не изменяющее функционал.

      Чтобы даже через год разработки, по сообщениям можно было
      восстановить цепочку изменений, *не забывайте указывать в
      сообщении как старое, так и новое имя в случае
      переименования/перемещения файлов*.

      Можно ещё использовать
        * `>` -- импорт. Если код был откуда-то взят. В сообщении
          указать откуда. Иначе использовать `+`.
        * `<` -- экспорт. Код был вынесен в какой-то другой проект.
          В сообщении указать куда. Иначе использовать `-`.

## Тэг имени

После дайджеста изменений можно поставить тэг имени. В большинстве
случаев достаточно имени файла (без расширения, если это не приводит
к неоднозначности), но в крупных системах логичнее использовать
метку подсистемы, например `[cookie-parsing]`.

Тут уж зависит от масштаба изменений. Если переколбашена вся подсистема
с полдюжиной файлов, логичнее в сделать один коммит с новой версией, а не
серию коммитов с переименованием/изменением каждого файла.

## Примечания

* Если под коммит не подходит под эти тэги, не используйте их. Напишите
внятный текст. Идея в том, чтобы иметь возможность маркировать
большинство изменений, но не все.

* Синтаксисы дайжжеста изменений и тэгов имён независимы. Возможно,
для имён более удобны хэштаги `#text`. Здесь данный вариант не
предлагается из соображений принципа Оккама.

* Использование такого рода меток облегчает написание патч-нотов и
интерактивный rebase.
